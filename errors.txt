colin@PiratesShip ~/tronbyt> docker compose down; docker compose up
[+] Running 2/2
 ✔ Container tronbyt-web-1  Removed                                                                                                                                      10.2s
 ✔ Network tronbyt_default  Removed                                                                                                                                       0.1s
[+] Running 2/2
 ✔ Network tronbyt_default  Created                                                                                                                                       0.0s
 ✔ Container tronbyt-web-1  Created                                                                                                                                       0.0s
Attaching to web-1
web-1  | Already up to date.
web-1  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
web-1  | INFO:     Started parent process [7]
web-1  | INFO:     Started server process [36]
web-1  | INFO:     Started server process [37]
web-1  | INFO:     Waiting for application startup.
web-1  | INFO:     Waiting for application startup.
web-1  | INFO:     Application startup complete.
web-1  | INFO:     Application startup complete.
web-1  | INFO:     192.168.147.1:57594 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:48812 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:19166 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     127.0.0.1:37612 - "GET /health HTTP/1.1" 200 OK
web-1  | INFO:     192.168.147.1:41323 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:31158 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:30325 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:52300 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:24776 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:22928 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:35138 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:43285 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:39747 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:62668 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:24631 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:25856 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:23682 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:38478 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:45207 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:29513 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:34293 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:41494 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:20714 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:40622 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:55964 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     192.168.147.1:19605 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
Gracefully Stopping... press Ctrl+C again to force
 Container tronbyt-web-1  Stopping
web-1  | INFO:     192.168.147.1:24669 - "GET /8e4fcd51/next HTTP/1.1" 500 Internal Server Error
web-1  | ERROR:    Exception in ASGI application
web-1  |   + Exception Group Traceback (most recent call last):
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
web-1  |   |     yield
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 183, in __call__
web-1  |   |     async with anyio.create_task_group() as task_group:
web-1  |   |                ~~~~~~~~~~~~~~~~~~~~~~~^^
web-1  |   |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
web-1  |   |     raise BaseExceptionGroup(
web-1  |   |         "unhandled errors in a TaskGroup", self._exceptions
web-1  |   |     ) from None
web-1  |   | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
web-1  |   +-+---------------- 1 ----------------
web-1  |     | Traceback (most recent call last):
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     |     result = await app(  # type: ignore[func-returns-value]
web-1  |     |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         self.scope, self.receive, self.send
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     |     return await self.app(scope, receive, send)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     |     await super().__call__(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     |     await self.app(scope, receive, _send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     |     with recv_stream, send_stream, collapse_excgroups():
web-1  |     |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |     |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     |     self.gen.throw(value)
web-1  |     |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     |     response = await self.dispatch_func(request, call_next)
web-1  |     |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     |     response: Response = await call_next(request)
web-1  |     |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     |     raise app_exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     |     await self.app(scope, receive, send_wrapper)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     |     await self.middleware_stack(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     |     await route.handle(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     |     await self.app(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     |     raise exc
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     |     await app(scope, receive, sender)
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     |     response = await f(request)
web-1  |     |                ^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     |     raw_response = await run_endpoint_function(
web-1  |     |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     ...<3 lines>...
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     |     return await run_in_threadpool(dependant.call, **values)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     |     return await anyio.to_thread.run_sync(func)
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |     |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |     )
web-1  |     |     ^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     |     return await future
web-1  |     |            ^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     |     result = context.run(func, *args)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     |     return _next_app_logic(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |     |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     |     for user in get_all_users(db):
web-1  |     |                 ~~~~~~~~~~~~~^^^^
web-1  |     |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |     |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |     |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  |     | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  |     | devices.8e4fcd51.apps.855.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     | devices.8e4fcd51.apps.950.recurrence_type
web-1  |     |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  |     | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |     |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  |     +------------------------------------
web-1  |
web-1  | During handling of the above exception, another exception occurred:
web-1  |
web-1  | Traceback (most recent call last):
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
web-1  |     result = await app(  # type: ignore[func-returns-value]
web-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         self.scope, self.receive, self.send
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
web-1  |     return await self.app(scope, receive, send)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1134, in __call__
web-1  |     await super().__call__(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/applications.py", line 113, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
web-1  |     await self.app(scope, receive, _send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 182, in __call__
web-1  |     with recv_stream, send_stream, collapse_excgroups():
web-1  |                                    ~~~~~~~~~~~~~~~~~~^^
web-1  |   File "/usr/lib/python3.13/contextlib.py", line 162, in __exit__
web-1  |     self.gen.throw(value)
web-1  |     ~~~~~~~~~~~~~~^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 184, in __call__
web-1  |     response = await self.dispatch_func(request, call_next)
web-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi_babel/middleware.py", line 106, in dispatch
web-1  |     response: Response = await call_next(request)
web-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 159, in call_next
web-1  |     raise app_exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/base.py", line 144, in coro
web-1  |     await self.app(scope, receive_or_disconnect, send_no_error)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/sessions.py", line 85, in __call__
web-1  |     await self.app(scope, receive, send_wrapper)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
web-1  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
web-1  |     await self.middleware_stack(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
web-1  |     await route.handle(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
web-1  |     await self.app(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 124, in app
web-1  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
web-1  |     raise exc
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
web-1  |     await app(scope, receive, sender)
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 110, in app
web-1  |     response = await f(request)
web-1  |                ^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 390, in app
web-1  |     raw_response = await run_endpoint_function(
web-1  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     ...<3 lines>...
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in run_endpoint_function
web-1  |     return await run_in_threadpool(dependant.call, **values)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
web-1  |     return await anyio.to_thread.run_sync(func)
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
web-1  |     return await get_async_backend().run_sync_in_worker_thread(
web-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
web-1  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1  |     )
web-1  |     ^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
web-1  |     return await future
web-1  |            ^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 976, in run
web-1  |     result = context.run(func, *args)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 1922, in next_app
web-1  |     return _next_app_logic(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/routers/manager.py", line 133, in _next_app_logic
web-1  |     user = db.get_user_by_device_id(db_conn, device_id)
web-1  |   File "/app/tronbyt_server/db.py", line 988, in get_user_by_device_id
web-1  |     for user in get_all_users(db):
web-1  |                 ~~~~~~~~~~~~~^^^^
web-1  |   File "/app/tronbyt_server/db.py", line 761, in get_all_users
web-1  |     return [User(**json.loads(row[0])) for row in cursor.fetchall()]
web-1  |             ~~~~^^^^^^^^^^^^^^^^^^^^^^
web-1  |   File "/app/.venv/lib/python3.13/site-packages/pydantic/main.py", line 250, in __init__
web-1  |     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
web-1  | pydantic_core._pydantic_core.ValidationError: 4 validation errors for User
web-1  | devices.8e4fcd51.apps.855.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.855.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | devices.8e4fcd51.apps.950.recurrence_type
web-1  |   Input should be 'daily', 'weekly', 'monthly' or 'yearly' [type=literal_error, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/literal_error
web-1  | devices.8e4fcd51.apps.950.recurrence_interval
web-1  |   Input should be a valid integer [type=int_type, input_value=None, input_type=NoneType]
web-1  |     For further information visit https://errors.pydantic.dev/2.12/v/int_type
web-1  | INFO:     Received SIGTERM, exiting.
web-1  | INFO:     Terminated child process [36]
web-1  | INFO:     Terminated child process [37]
web-1  | INFO:     Waiting for child process [36]
web-1  | INFO:     Shutting down
web-1  | INFO:     Shutting down
web-1  | INFO:     Waiting for application shutdown.
web-1  | INFO:     Waiting for application shutdown.
web-1  | INFO:     Application shutdown complete.
web-1  | INFO:     Application shutdown complete.
web-1  | INFO:     Finished server process [37]
web-1  | INFO:     Finished server process [36]
web-1  | INFO:     Waiting for child process [37]
web-1  | INFO:     Stopping parent process [7]
